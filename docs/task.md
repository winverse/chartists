# 프로젝트 작업 목록

## 1단계: 데이터 수집 및 저장

1.  **프로젝트 환경 설정**
    -   `package.json`에 필요한 라이브러리(`playwright`, `crawlee`, `dotenv` 등)를 추가하고 설치합니다.
    -   `dotenv`를 사용하여 환경 변수(API 키, 계정 정보 등)를 설정합니다.

2.  **데이터베이스 스키마 정의**
    -   `packages/database/prisma/schema.prisma` 파일에 주식 종목 정보를 저장할 `Stock` 모델을 정의합니다. (종목 코드, 종목명 등)

3.  **한국투자증권 API 연동 및 데이터 저장**
    -   **3.1. API 인증:** API 사용을 위한 Access Token 발급 기능을 구현합니다.
    -   **3.2. 조건 검색:** HTS에 미리 저장된 조건식을 사용하여 대상 종목(코스피, 코스닥)의 목록(종목 코드, 종목명)을 조회하는 기능을 구현합니다.
        -   *선행 작업: 한국투자증권 HTS에서 '시가총액 1000억 이상' 등의 조건식을 생성하고 서버에 저장해야 합니다.*
    -   **3.3. 데이터베이스 저장:** API를 통해 가져온 종목 목록을 MongoDB 데이터베이스에 저장하는 스크립트를 작성합니다.

## 2단계: 차트 이미지 수집 자동화

4.  **Toss 증권 차트 스크린샷 자동화**
    -   **4.1. 로그인 자동화 (선택 사항):** `playwright` 와 `crawlee` 를 사용하여 Perplexity.ai와 같은 서비스에 접근하기 위한 구글 로그인 자동화를 구현합니다.
    -   **4.2. 차트 페이지 이동:** 데이터베이스에 저장된 종목 코드를 기반으로 각 종목의 Toss 증권 차트 페이지로 이동하는 기능을 구현합니다.
    -   **4.3. 차트 조작 및 스크린샷:** Playwright를 사용하여 다음 UI 상호작용을 자동화하고 스크린샷을 저장합니다.
        -   '차트 크게보기' 클릭
        -   차트 확대 (3회)
        -   차트 우측으로 스크롤
        -   '주' 단위 차트 선택
        -   전체 화면 스크린샷 캡처 및 저장

## 3단계: 스크립트 통합 및 고도화

5.  **전체 프로세스 통합**
    -   1단계와 2단계에서 개발한 기능들을 순차적으로 실행하는 메인 스크립트를 작성합니다.

6.  **안정성 및 유지보수**
    -   오류 발생 시 재시도 또는 로깅을 통해 안정적인 실행을 보장하는 오류 처리 로직을 추가합니다.
    -   각 단계의 실행 상태를 확인할 수 있도록 로깅 기능을 구현합니다.